(this["webpackJsonpuse-custom-effect-example"]=this["webpackJsonpuse-custom-effect-example"]||[]).push([[0],{11:function(e,t,u){},12:function(e,t,u){"use strict";u.r(t);var n=u(0),a=u.n(n),r=u(3),s=u.n(r),c=(u(11),u(1)),i="pressed",l="released",o="enter",f="leave",m="start",d="success",E="error",p=({title:e,children:t})=>n.createElement("div",{className:"section"},n.createElement("h4",null,e),t),v=[{id:1,text:"delectus aut autem"},{id:2,text:"quis ut nam facilis et officia qui"},{id:3,text:"fugiat veniam minus"},{id:4,text:"et porro tempora"},{id:5,text:"laboriosam mollitia et enim quasi adipisci quia provident illum"},{id:6,text:"qui ullam ratione quibusdam voluptatem quia omnis"},{id:7,text:"illo expedita consequatur quia in"},{id:8,text:"quo adipisci enim quam ut ab"},{id:9,text:"molestiae perspiciatis ipsa"},{id:10,text:"illo est ratione doloremque quia maiores aut"},{id:11,text:"vero rerum temporibus dolor"},{id:12,text:"ipsa repellendus fugit nisi"},{id:13,text:"et doloremque nulla"},{id:14,text:"repellendus sunt dolores architecto voluptatum"},{id:15,text:"ab voluptatum amet voluptas"},{id:16,text:"accusamus eos facilis sint et aut voluptatem"},{id:17,text:"quo laboriosam deleniti aut qui"},{id:18,text:"dolorum est consequatur ea mollitia in culpa"},{id:19,text:"molestiae ipsa aut voluptatibus pariatur dolor nihil"},{id:20,text:"ullam nobis libero sapiente ad optio sint"}],b=({runButtonEffect:e})=>n.createElement(p,{title:"Button"},n.createElement("button",{onMouseDown:()=>{e(i)},onMouseUp:()=>{e(l)},onMouseEnter:()=>{e(o)},onMouseLeave:()=>{e(f)},className:"button"},"Test me")),h=({runFetchEffect:e})=>{var t=Object(n.useRef)();return n.createElement(p,{title:"Fetch"},n.createElement("div",{className:"input-field"},n.createElement("p",null,"Items size (1-20):"),n.createElement("input",{ref:t})),n.createElement("button",{className:"button",onClick:()=>{var u=Number(t.current.value);e(m),(e=>new Promise((t,u)=>{setTimeout(()=>{!e||isNaN(e)||e<0||e>v.length?u(new Error("Invalid size value")):t(v.slice(0,e))},1e3)}))(u).then(t=>{e(d,t)}).catch(t=>{e(E,t)})}},"Fetch Items"))},x=({runRemoveEffect:e})=>{var t=Object(n.useRef)(),u=u=>()=>{var n=Number(t.current.value);e(u,n)};return n.createElement(p,{title:"Remove"},n.createElement("div",{className:"input-field"},n.createElement("p",null,"Item index:"),n.createElement("input",{ref:t})),n.createElement("button",{className:"button",onMouseDown:u(i),onMouseUp:u(l),onMouseLeave:u(f)},"Remove Item"))},O=({runButtonEffect:e,runFetchEffect:t,runRemoveEffect:u})=>n.createElement("div",{className:"demo-panel"},n.createElement("h3",null,"Effect Controls"),n.createElement(b,{runButtonEffect:e}),n.createElement(h,{runFetchEffect:t}),n.createElement(x,{runRemoveEffect:u})),R=u(2),j=({useRemoveEffect:e,items:t,updateItems:u})=>{var a=Object(n.useState)(""),r=Object(c.a)(a,2),s=r[0],o=r[1],m=(({useRemoveEffect:e,items:t,setStatus:u})=>{var n=e=>n=>{0!==t.length?isNaN(e)||e<=0||e>t.length?u("INVALID INDEX"):n():u("NO ITEMS FETCHED")};return{usePressedEffect:(t,u)=>{e((e,u)=>{e===i&&n(u)(()=>{t(u)})},u)},useReleasedEffect:(t,u)=>{e((e,u)=>{e===l&&n(u)(()=>{t(u)})},u)},useLeaveEffect:(t,u)=>{e(e=>{e===f&&t()},u)}}})({useRemoveEffect:e,items:t,updateItems:u,setStatus:o}),d=m.usePressedEffect,E=m.useReleasedEffect,p=m.useLeaveEffect;return d(e=>{o("WILL REMOVE: "+e),u(t.map((t,u)=>u!==e-1?t:Object(R.a)(Object(R.a)({},t),{},{shouldRemove:!0})))},[t]),E(e=>{o("DID REMOVE: "+e),u(t.filter(e=>!e.shouldRemove))},[t]),p(()=>{u(t.map(({id:e,text:t})=>({id:e,text:t}))),o("")},[t]),s},N=({items:e})=>{var t=e||[];return n.createElement("ol",{className:"list"},t.map(e=>{var t=e.shouldRemove?"item item--shouldRemove":"item";return n.createElement("li",{className:t,key:e.id},e.text)}))},I=({title:e,status:t})=>n.createElement(p,{title:e},n.createElement("p",null,t?t.toUpperCase():"")),q=({useButtonEffect:e,useFetchEffect:t,useRemoveEffect:u})=>{var a=Object(n.useState)([]),r=Object(c.a)(a,2),s=r[0],i=r[1],l=(e=>{var t=Object(n.useState)(null),u=Object(c.a)(t,2),a=u[0],r=u[1];return e(e=>{r(e)}),a})(e),o=(({useFetchEffect:e,updateItems:t})=>{var u=Object(n.useState)({status:"",response:null}),a=Object(c.a)(u,2),r=a[0],s=r.status,i=r.response,l=a[1];return e((e,t)=>{l(e===m?{status:"pending",response:null}:{status:e,response:t})}),e((e,u)=>{e===d&&t(u)}),{fetchStatus:s,response:i}})({useFetchEffect:t,updateItems:i}),f=o.fetchStatus,v=o.response,b=j({useRemoveEffect:u,items:s,updateItems:i});return n.createElement("div",{className:"demo-panel"},n.createElement("h3",null,"Effect Feedback"),n.createElement(I,{title:"Button status:",status:l}),n.createElement(I,{title:"Fetch status:",status:f}),n.createElement(I,{title:"Remove status:",status:b}),n.createElement(p,{title:"Result: "},f===E?v.toString():n.createElement(N,{items:s})))},g=function(e,t){return e.id===t.id},F=function(){var e=Object(n.useRef)([]),t=Object(n.useReducer)((function(e){return e+1}),0)[1];return Object(n.useEffect)((function(){return function(){e.current=[]}}),[]),{callbacks:e.current,register:function(u){var n=u.id,a=u.fn;e.current.push({id:n,fn:a}),t()},update:function(u){var n=u.id,a=u.fn,r=e.current.findIndex((function(e){return g(e,{id:n,fn:a})}));-1!==r&&(e.current[r].fn=a,t())},remove:function(u){var n=u.id,a=u.fn,r=e.current.findIndex((function(e){return g(e,{id:n,fn:a})}));-1!==r&&(e.current.splice(r,1),t())}}},S=function(e){var t=e.register,u=e.update,a=e.remove;return function(e,r,s){void 0===r&&(r=[]);var c=Object(n.useRef)(),i=Object(n.useCallback)(e,r);!function(e,t){var u=Object(n.useRef)(!0);Object(n.useEffect)((function(){u.current?u.current=!1:e()}),t)}((function(){c.current&&u({id:c.current,fn:i})}),[i]),Object(n.useEffect)((function(){return c.current=Symbol(s),t({id:c.current,fn:i}),function(){c.current&&a({id:c.current,fn:i})}}),[])}},k=function(){var e=F(),t=e.callbacks,u=e.register,a=e.update,r=e.remove,s=S({register:u,update:a,remove:r}),c=Object(n.useCallback)((function(){for(var e=[],u=0;u<arguments.length;u++)e[u]=arguments[u];t.forEach((function(t){t.fn.apply(t,e)}))}),[t]);return[s,Object(n.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.apply(void 0,e)}),[c])]},M=()=>{var e=k(),t=Object(c.a)(e,2),u=t[0],a=t[1],r=k(),s=Object(c.a)(r,2),i=s[0],l=s[1],o=k(),f=Object(c.a)(o,2),m=f[0],d=f[1];return n.createElement("div",{className:"app"},n.createElement(O,{runButtonEffect:a,runFetchEffect:l,runRemoveEffect:d}),n.createElement(q,{useButtonEffect:u,useFetchEffect:i,useRemoveEffect:m}))};s.a.render(a.a.createElement(M,null),document.getElementById("root"))},4:function(e,t,u){e.exports=u(12)}},[[4,1,2]]]);
//# sourceMappingURL=main.0831007a.chunk.js.map